{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\OneDrive\\\\\\u0633\\u0637\\u062D \\u0627\\u0644\\u0645\\u0643\\u062A\\u0628\\\\3K Store\\\\3k-store\\\\src\\\\Components\\\\Context\\\\CartContext.js\",\n  _s = $RefreshSig$();\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { createContext } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport $ from 'jquery';\n// to use it in the component what i want\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartContext = /*#__PURE__*/createContext();\nexport default function CartContextProvider({\n  children\n}) {\n  _s();\n  const location = useLocation();\n  const navigate = useNavigate();\n  async function updateCount(id, realCount) {\n    try {\n      const {\n        data\n      } = await axios.put(`https://ecommerce.routemisr.com/api/v1/cart/${id}`, {\n        'count': realCount\n      }, {\n        headers: {\n          'token': localStorage.getItem('token')\n        }\n      });\n      if (data.status === 'success') {\n        setTotalCartPrice(data.data.totalCartPrice);\n        setCartProducts(data.data.products);\n        setNumOfCartItems(data.numOfCartItems);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  async function addProductToCart(id) {\n    try {\n      const {\n        data\n      } = await axios.post('https://ecommerce.routemisr.com/api/v1/cart', {\n        \"productId\": id\n      }, {\n        headers: {\n          'token': localStorage.getItem('token')\n        }\n      });\n      if (data.status === 'success') {\n        return true;\n      } else {\n        return false;\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  async function getAllProductsInCart() {\n    try {\n      const {\n        data\n      } = await axios.get('https://ecommerce.routemisr.com/api/v1/cart', {\n        headers: {\n          'token': localStorage.getItem('token')\n        }\n      });\n      if (data.status === 'success') {\n        setTotalCartPrice(data.data.totalCartPrice);\n        setCartProducts(data.data.products);\n        setNumOfCartItems(data.numOfCartItems);\n        setCartId(data.data._id);\n      }\n    } catch (error) {\n      console.log(error);\n      if (error.response.status === 404 && location.pathname === '/cart') {\n        $('.emptyCart').fadeIn(1000, function () {\n          $('.emptyCart').fadeOut(5000);\n        });\n      }\n    }\n  }\n  useEffect(function () {\n    getAllProductsInCart();\n  }, []);\n  async function removeFromCart(_id) {\n    try {\n      const {\n        data\n      } = await axios.delete(`https://ecommerce.routemisr.com/api/v1/cart/${_id}`, {\n        headers: {\n          'token': localStorage.getItem('token')\n        }\n      });\n      if (data.status === 'success') {\n        setCartProducts(data.data.products);\n        setNumOfCartItems(data.numOfCartItems);\n        setTotalCartPrice(data.data.totalCartPrice);\n        return true;\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  const [cartProducts, setCartProducts] = useState(null);\n  const [numOfCartItems, setNumOfCartItems] = useState(0);\n  const [totalCartPrice, setTotalCartPrice] = useState(0);\n  const [cartId, setCartId] = useState(null);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      addProductToCart,\n      totalCartPrice,\n      cartProducts,\n      removeFromCart,\n      cartId,\n      updateCount\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        'display': 'none'\n      },\n      className: \"alert my-2 alert-danger emptyCart\",\n      children: \"Empty Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), children, \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n}\n_s(CartContextProvider, \"hLoehVloYH6W89+MK0V1jkJsBDc=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = CartContextProvider;\nvar _c;\n$RefreshReg$(_c, \"CartContextProvider\");","map":{"version":3,"names":["axios","React","useEffect","useState","createContext","useLocation","useNavigate","$","jsxDEV","_jsxDEV","CartContext","CartContextProvider","children","_s","location","navigate","updateCount","id","realCount","data","put","headers","localStorage","getItem","status","setTotalCartPrice","totalCartPrice","setCartProducts","products","setNumOfCartItems","numOfCartItems","error","console","log","addProductToCart","post","getAllProductsInCart","get","setCartId","_id","response","pathname","fadeIn","fadeOut","removeFromCart","delete","cartProducts","cartId","Provider","value","style","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Lenovo/OneDrive/سطح المكتب/3K Store/3k-store/src/Components/Context/CartContext.js"],"sourcesContent":["import axios from 'axios'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { createContext } from 'react'\r\nimport { useLocation, useNavigate } from 'react-router-dom'\r\nimport $ from 'jquery'\r\n// to use it in the component what i want\r\nexport const CartContext = createContext()\r\nexport default function CartContextProvider({children}) {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  async function updateCount(id , realCount){\r\n    try{\r\n      const {data} = await axios.put(`https://ecommerce.routemisr.com/api/v1/cart/${id}`,{\r\n        'count': realCount \r\n      },\r\n      {\r\n        headers : {'token' : localStorage.getItem('token')}\r\n      });\r\n      if (data.status === 'success') {\r\n        setTotalCartPrice(data.data.totalCartPrice);\r\n        setCartProducts(data.data.products);\r\n        setNumOfCartItems(data.numOfCartItems);\r\n      }\r\n    }\r\n    catch(error){\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  async function addProductToCart(id){\r\n    try {\r\n      const {data} = await axios.post('https://ecommerce.routemisr.com/api/v1/cart' , {\r\n      \r\n        \"productId\": id\r\n    \r\n    },\r\n    {\r\n      headers: {'token' : localStorage.getItem('token')}\r\n    })\r\n    \r\n\r\n    if( data.status === 'success'){\r\n\r\n        return true;\r\n    }else{\r\n      return false\r\n    }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n\r\n  }\r\n\r\n  async function getAllProductsInCart(){\r\n    try {\r\n      const {data} = await axios.get('https://ecommerce.routemisr.com/api/v1/cart',{headers:{'token' : localStorage.getItem('token')}})\r\n      if (data.status === 'success') {\r\n        setTotalCartPrice(data.data.totalCartPrice);\r\n        setCartProducts(data.data.products);\r\n        setNumOfCartItems(data.numOfCartItems);\r\n        setCartId(data.data._id)\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.log(error);\r\n      if (error.response.status === 404 && location.pathname === '/cart' ) {\r\n        $('.emptyCart').fadeIn(1000 , function(){\r\n          $('.emptyCart').fadeOut(5000)\r\n          \r\n        })\r\n      }\r\n    }\r\n  \r\n  \r\n  \r\n  }\r\n  useEffect(function(){\r\n    getAllProductsInCart();\r\n  },[]);\r\n\r\n\r\n  async function removeFromCart(_id){\r\n    try {\r\n      const {data} = await axios.delete(`https://ecommerce.routemisr.com/api/v1/cart/${_id}` , {headers:{\r\n        'token' : localStorage.getItem('token')\r\n      }})\r\n      if(data.status === 'success'){\r\n        setCartProducts(data.data.products);\r\n        setNumOfCartItems(data.numOfCartItems);\r\n        setTotalCartPrice(data.data.totalCartPrice);\r\n        return true ;\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  const [cartProducts , setCartProducts] = useState(null);\r\n  const [numOfCartItems , setNumOfCartItems] = useState(0);\r\n  const [totalCartPrice , setTotalCartPrice] = useState(0);\r\n  const [cartId , setCartId] = useState(null);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    <CartContext.Provider value={{addProductToCart,  totalCartPrice ,cartProducts , removeFromCart ,cartId , updateCount}}>\r\n      <div style={{'display': 'none'}} className='alert my-2 alert-danger emptyCart'>\r\n        Empty Cart\r\n      </div>\r\n      {children} {/* to make data shared on childrens */}\r\n    </CartContext.Provider>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}